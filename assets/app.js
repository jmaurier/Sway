angular.module("app",["ngRoute"]),angular.module("app").controller("AdminCtrl",["$scope","UserSvc","toastr",function(e,t,n){}]),angular.module("app",["ngRoute","toastr","ui.bootstrap","xeditable"]).controller("ApplicationCtrl",["$scope","$location","$window","UserSvc","toastr",function(e,t,n,o,a){if(e.$on("login",function(n,o){e.currentUser=o,t.path("/")}),e.logout=function(){delete e.currentUser,t.path("/login"),window.sessionStorage.removeItem("token")},o.isLoggedIn()){o.getUser().then(function(t){e.currentUser=t})}else t.path("/login")}]),angular.module("app").controller("DashboardCtrl",["$scope","$location","UserSvc","TimesheetSvc","toastr",function(e,t,n,o,a){n.isLoggedIn()||t.path("/login"),e.createNewTimeSheet=function(n,a){console.log(new Date(a.getFullYear(),a.getMonth(),a.getDate())),o.create({title:n,week_beginning:a,week_one:{sunday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate())},monday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)},tuesday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+2)},wednesday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+3)},thursday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+4)},friday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+5)},saturday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)}},week_two:{sunday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+7)},monday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+8)},tuesday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+9)},wednesday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+10)},thursday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+11)},friday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+12)},saturday:{date:new Date(a.getFullYear(),a.getMonth(),a.getDate()+13)}}}).success(function(n){e.timesheets.unshift(n),t.path("/")})},o.fetch().success(function(t){e.timesheets=t})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","toastr",function(e,t,n){e.login=function(n,o){e.errorMsg="",t.login(n,o).then(function(t){e.$emit("login",t)},function(t){e.errorMsg="Incorrect H Number/Password."})}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","toastr",function(e,t,n){e.error=!1,e.errormsg="",e.register=function(o,a,r,s){t.register(o,a,r,s).then(function(t){e.$emit("login",t)},function(t){console.log(t),401==t.status&&(e.error=!0,n.error("This H-Number is already in use, faggot.","Error"))})}}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"DashboardCtrl",templateUrl:"/templates/dashboard.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"}).when("/timesheet/:timesheet_id",{controller:"TimesheetCtrl",templateUrl:"/templates/timesheet.html"}).when("/admin",{controller:"AdminCtrl",templateUrl:"/templates/admin.html"})}]),angular.module("app").controller("TimesheetCtrl",["$scope","$routeParams","$location","UserSvc","TimesheetSvc","toastr",function(e,t,n,o,a,r){o.isLoggedIn()||n.path("/login"),e.clockin=function(){},e.clockout=function(){},a.fetchById(t.timesheet_id).then(function(t){e.timesheet=t.data,console.log(e.timesheet)}),e.deleteTimesheet=function(){var e=t.timesheet_id;a.deleteById(e).then(function(e){r.success(e.data.message),n.path("/")})}}]),angular.module("app").service("TimesheetSvc",["$http",function(e){this.fetch=function(){return e.get("/api/timesheets")},this.fetchById=function(t){return e.get("/api/timesheets/"+t)},this.deleteById=function(t){return e["delete"]("/api/timesheets/"+t)},this.create=function(t){return e.post("/api/timesheets",t)}}]),angular.module("app").service("UserSvc",["$http",function(e){var t=this;t.getUser=function(){return e.get("/api/users").then(function(e){return e.data})},t.login=function(n,o){return e.post("/api/sessions",{H_number:n,password:o}).then(function(n){return window.sessionStorage.token=n.data,e.defaults.headers.common["x-auth"]=n.data,t.getUser()})},t.register=function(n,o,a,r){return e.post("/api/users",{H_number:n,password:o,name:a,emailaddr:r}).then(function(){return t.login(n,o)},function(e){console.log(e)})},t.isLoggedIn=function(){var t=!1;return window.sessionStorage.token&&(e.defaults.headers.common["x-auth"]=window.sessionStorage.token,t=!0),t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFkbWluLmN0cmwuanMiLCJhcHBsaWNhdGlvbi5jdHJsLmpzIiwiZGFzaGJvYXJkLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicmVnaXN0ZXIuY3RybC5qcyIsInJvdXRlcy5qcyIsInRpbWVzaGVldC5jdHJsLmpzIiwidGltZXNoZWV0LnN2Yy5qcyIsInVzZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiVXNlclN2YyIsInRvYXN0ciIsIiRsb2NhdGlvbiIsIiR3aW5kb3ciLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwicGF0aCIsImxvZ291dCIsIndpbmRvdyIsInNlc3Npb25TdG9yYWdlIiwicmVtb3ZlSXRlbSIsImlzTG9nZ2VkSW4iLCJnZXRVc2VyIiwidGhlbiIsInJlc3BvbnNlIiwiVGltZXNoZWV0U3ZjIiwiY3JlYXRlTmV3VGltZVNoZWV0IiwidGl0bGUiLCJ3ZWVrX2JlZ2lubmluZyIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJjcmVhdGUiLCJ3ZWVrX29uZSIsInN1bmRheSIsImRhdGUiLCJtb25kYXkiLCJ0dWVzZGF5Iiwid2VkbmVzZGF5IiwidGh1cnNkYXkiLCJmcmlkYXkiLCJzYXR1cmRheSIsIndlZWtfdHdvIiwic3VjY2VzcyIsInRpbWVfc2hlZXQiLCJ0aW1lc2hlZXRzIiwidW5zaGlmdCIsImZldGNoIiwibG9naW4iLCJIX251bWJlciIsInBhc3N3b3JkIiwiZXJyb3JNc2ciLCIkZW1pdCIsImVycm9yIiwiZXJyb3Jtc2ciLCJyZWdpc3RlciIsIm5hbWUiLCJlbWFpbGFkZHIiLCJzdGF0dXMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIiRyb3V0ZVBhcmFtcyIsImNsb2NraW4iLCJjbG9ja291dCIsImZldGNoQnlJZCIsInRpbWVzaGVldF9pZCIsInRpbWVzaGVldCIsImRhdGEiLCJkZWxldGVUaW1lc2hlZXQiLCJ0aW1lU2hlZXRJZCIsImRlbGV0ZUJ5SWQiLCJtZXNzYWdlIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsImlkIiwicG9zdCIsInN2YyIsInRva2VuIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwicmVzdWx0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxPQUNFLFlDREZELFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxhQUF5QixTQUFBLFVBQUEsU0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxPQ0R6QkwsUUFBQUMsT0FBQSxPQUFBLFVBQUEsU0FBQSxlQUFBLGNBQ0FDLFdBQUEsbUJBQStCLFNBQUEsWUFBQSxVQUFBLFVBQUEsU0FBQSxTQUFBQyxFQUFBRyxFQUFBQyxFQUFBSCxFQUFBQyxHQVk3QixHQVhBRixFQUFBSyxJQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FDRVAsRUFBQVEsWUFBQUQsRUFDQUosRUFBQU0sS0FBQSxPQUdGVCxFQUFBVSxPQUFBLGlCQUNDVixHQUFBLFlBQ0NHLEVBQUFNLEtBQUEsVUFDQUUsT0FBQUMsZUFBQUMsV0FBQSxVQUdGWixFQUFBYSxhQUNFLENBQUFiLEVBQUFjLFVBQUFDLEtBQUEsU0FBQUMsR0FDRWpCLEVBQUFRLFlBQUFTLFFBR0ZkLEdBQUFNLEtBQUEsYUNsQkpaLFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxpQkFBNkIsU0FBQSxZQUFBLFVBQUEsZUFBQSxTQUFBLFNBQUFDLEVBQUFHLEVBQUFGLEVBQUFpQixFQUFBaEIsR0FFNUJELEVBQUFhLGNBQ0NYLEVBQUFNLEtBQUEsVUFHRFQsRUFBQW1CLG1CQUFBLFNBQUFDLEVBQUFDLEdBQ0NDLFFBQUFDLElBQUEsR0FBQUMsTUFBQUgsRUFBQUksY0FBQUosRUFBQUssV0FBQUwsRUFBQU0sWUFDQ1QsRUFBQVUsUUFDS1IsTUFBQUEsRUFDQUMsZUFBQUEsRUFDQVEsVUFDQ0MsUUFBQUMsS0FBQSxHQUFBUCxNQUFBSCxFQUFBSSxjQUFBSixFQUFBSyxXQUFBTCxFQUFBTSxZQUNBSyxRQUFBRCxLQUFBLEdBQUFQLE1BQUFILEVBQUFJLGNBQUFKLEVBQUFLLFdBQUFMLEVBQUFNLFVBQUEsSUFDQU0sU0FBQUYsS0FBQSxHQUFBUCxNQUFBSCxFQUFBSSxjQUFBSixFQUFBSyxXQUFBTCxFQUFBTSxVQUFBLElBQ0FPLFdBQUFILEtBQUEsR0FBQVAsTUFBQUgsRUFBQUksY0FBQUosRUFBQUssV0FBQUwsRUFBQU0sVUFBQSxJQUNBUSxVQUFBSixLQUFBLEdBQUFQLE1BQUFILEVBQUFJLGNBQUFKLEVBQUFLLFdBQUFMLEVBQUFNLFVBQUEsSUFDQVMsUUFBQUwsS0FBQSxHQUFBUCxNQUFBSCxFQUFBSSxjQUFBSixFQUFBSyxXQUFBTCxFQUFBTSxVQUFBLElBQ0FVLFVBQUFOLEtBQUEsR0FBQVAsTUFBQUgsRUFBQUksY0FBQUosRUFBQUssV0FBQUwsRUFBQU0sVUFBQSxLQUVEVyxVQUNDUixRQUFBQyxLQUFBLEdBQUFQLE1BQUFILEVBQUFJLGNBQUFKLEVBQUFLLFdBQUFMLEVBQUFNLFVBQUEsSUFDQUssUUFBQUQsS0FBQSxHQUFBUCxNQUFBSCxFQUFBSSxjQUFBSixFQUFBSyxXQUFBTCxFQUFBTSxVQUFBLElBQ0FNLFNBQUFGLEtBQUEsR0FBQVAsTUFBQUgsRUFBQUksY0FBQUosRUFBQUssV0FBQUwsRUFBQU0sVUFBQSxJQUNBTyxXQUFBSCxLQUFBLEdBQUFQLE1BQUFILEVBQUFJLGNBQUFKLEVBQUFLLFdBQUFMLEVBQUFNLFVBQUEsS0FDQVEsVUFBQUosS0FBQSxHQUFBUCxNQUFBSCxFQUFBSSxjQUFBSixFQUFBSyxXQUFBTCxFQUFBTSxVQUFBLEtBQ0FTLFFBQUFMLEtBQUEsR0FBQVAsTUFBQUgsRUFBQUksY0FBQUosRUFBQUssV0FBQUwsRUFBQU0sVUFBQSxLQUNBVSxVQUFBTixLQUFBLEdBQUFQLE1BQUFILEVBQUFJLGNBQUFKLEVBQUFLLFdBQUFMLEVBQUFNLFVBQUEsUUFHSFksUUFBQSxTQUFBQyxHQUNDeEMsRUFBQXlDLFdBQUFDLFFBQUFGLEdBQ0NyQyxFQUFBTSxLQUFBLFFBSVBTLEVBQUF5QixRQUFBSixRQUFBLFNBQUFFLEdBQ0N6QyxFQUFBeUMsV0FBQUEsT0N0Q0Y1QyxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsYUFBeUIsU0FBQSxVQUFBLFNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDdkJGLEVBQUE0QyxNQUFBLFNBQUFDLEVBQUFDLEdBQ0M5QyxFQUFBK0MsU0FBQSxHQUNDOUMsRUFBQTJDLE1BQUFDLEVBQUFDLEdBQ0E5QixLQUFBLFNBQUFULEdBQ0VQLEVBQUFnRCxNQUFBLFFBQUF6QyxJQUNGLFNBQUEwQyxHQUNDakQsRUFBQStDLFNBQUEscUNDUkxsRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsZ0JBQTRCLFNBQUEsVUFBQSxTQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBRTNCRixFQUFBaUQsT0FBQSxFQUNBakQsRUFBQWtELFNBQUEsR0FFQWxELEVBQUFtRCxTQUFBLFNBQUFOLEVBQUFDLEVBQUFNLEVBQUFDLEdBQ0NwRCxFQUFBa0QsU0FBQU4sRUFBQUMsRUFBQU0sRUFBQUMsR0FDQ3JDLEtBQUEsU0FBQVQsR0FDRVAsRUFBQWdELE1BQUEsUUFBQXpDLElBQ0YsU0FBQTBDLEdBQ0MzQixRQUFBQyxJQUFBMEIsR0FDQyxLQUFBQSxFQUFBSyxTQUNDdEQsRUFBQWlELE9BQUEsRUFDRi9DLEVBQUErQyxNQUFBLDJDQUFBLGdCQ2RKcEQsUUFBQUMsT0FBQSxPQUNBeUQsUUFBUSxpQkFBQSxTQUFBQyxHQUNQQSxFQUNBQyxLQUFBLEtBQUExRCxXQUFBLGdCQUErQzJELFlBQUEsOEJBQy9DRCxLQUFBLGFBQUExRCxXQUFBLGVBQThDMkQsWUFBQSw2QkFDOUNELEtBQUEsVUFBQTFELFdBQUEsWUFBMkMyRCxZQUFBLDBCQUMzQ0QsS0FBQSw0QkFBQTFELFdBQUEsZ0JBQTZEMkQsWUFBQSw4QkFDN0RELEtBQUEsVUFBQTFELFdBQUEsWUFBdUMyRCxZQUFBLDZCQ1B4QzdELFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxpQkFBNkIsU0FBQSxlQUFBLFlBQUEsVUFBQSxlQUFBLFNBQUEsU0FBQUMsRUFBQTJELEVBQUF4RCxFQUFBRixFQUFBaUIsRUFBQWhCLEdBRTVCRCxFQUFBYSxjQUNDWCxFQUFBTSxLQUFBLFVBR0RULEVBQUE0RCxRQUFBLGFBSUE1RCxFQUFBNkQsU0FBQSxhQUlBM0MsRUFBQTRDLFVBQUFILEVBQUFJLGNBQUEvQyxLQUFBLFNBQUFDLEdBQ0NqQixFQUFBZ0UsVUFBQS9DLEVBQUFnRCxLQUNBM0MsUUFBQUMsSUFBQXZCLEVBQUFnRSxhQUdFaEUsRUFBQWtFLGdCQUFBLFdBQ0MsR0FBQUMsR0FBQVIsRUFBQUksWUFDQTdDLEdBQUFrRCxXQUFBRCxHQUFBbkQsS0FBQSxTQUFBQyxHQUNDZixFQUFBcUMsUUFBQXRCLEVBQUFnRCxLQUFBSSxTQUNBbEUsRUFBQU0sS0FBQSxXQ3hCTlosUUFBQUMsT0FBQSxPQUNBd0UsUUFBQSxnQkFBeUIsUUFBQSxTQUFBQyxHQUV2QkMsS0FBQTdCLE1BQUEsV0FDRSxNQUFBNEIsR0FBQUUsSUFBQSxvQkFHRkQsS0FBQVYsVUFBQSxTQUFBWSxHQUNFLE1BQUFILEdBQUFFLElBQUEsbUJBQUFDLElBR0ZGLEtBQUFKLFdBQUEsU0FBQU0sR0FDQyxNQUFBSCxHQUFBQSxVQUFBLG1CQUFBRyxJQUdERixLQUFBNUMsT0FBQSxTQUFBb0MsR0FDRSxNQUFBTyxHQUFBSSxLQUFBLGtCQUFBWCxPQ2hCSm5FLFFBQUFDLE9BQUEsT0FDQXdFLFFBQUEsV0FBb0IsUUFBQSxTQUFBQyxHQUNsQixHQUFBSyxHQUFBSixJQUNBSSxHQUFBN0QsUUFBQSxXQUNFLE1BQUF3RCxHQUFBRSxJQUFBLGNBQ0F6RCxLQUFBLFNBQUFDLEdBQ0UsTUFBQUEsR0FBQWdELFFBR0pXLEVBQUFoQyxNQUFBLFNBQUFDLEVBQUFDLEdBQ0UsTUFBQXlCLEdBQUFJLEtBQUEsaUJBQ0U5QixTQUFBQSxFQUFBQyxTQUFBQSxJQUNGOUIsS0FBQSxTQUFBQyxHQUdFLE1BRkFOLFFBQUFDLGVBQUFpRSxNQUFBNUQsRUFBQWdELEtBQ0FNLEVBQUFPLFNBQUFDLFFBQUFDLE9BQUEsVUFBQS9ELEVBQUFnRCxLQUNBVyxFQUFBN0QsYUFHSjZELEVBQUF6QixTQUFBLFNBQUFOLEVBQUFDLEVBQUFNLEVBQUFDLEdBQ0UsTUFBQWtCLEdBQUFJLEtBQUEsY0FDRTlCLFNBQUFBLEVBQUFDLFNBQUFBLEVBQUFNLEtBQUFBLEVBQUFDLFVBQUFBLElBQ0ZyQyxLQUFBLFdBQ0UsTUFBQTRELEdBQUFoQyxNQUFBQyxFQUFBQyxJQUNGLFNBQUFHLEdBQ0UzQixRQUFBQyxJQUFBMEIsTUFHSjJCLEVBQUE5RCxXQUFBLFdBQ0UsR0FBQW1FLElBQUEsQ0FLQSxPQUpBdEUsUUFBQUMsZUFBQWlFLFFBQ0VOLEVBQUFPLFNBQUFDLFFBQUFDLE9BQUEsVUFBQXJFLE9BQUFDLGVBQUFpRSxNQUNBSSxHQUFBLEdBRUZBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICduZ1JvdXRlJ1xuXSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FkbWluQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMsIHRvYXN0cikge1xuIFxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCd0b2FzdHInLCd1aS5ib290c3RyYXAnLCAneGVkaXRhYmxlJ10pXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCAkd2luZG93LCBVc2VyU3ZjLCB0b2FzdHIpIHtcbiAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xuICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXJcbiAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gIH0pXG5cbiAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gIFx0ZGVsZXRlKCRzY29wZS5jdXJyZW50VXNlcikgXG4gICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpXG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJylcbiAgfVxuXG4gIGlmKFVzZXJTdmMuaXNMb2dnZWRJbigpKXtcblx0ICBcdHZhciB1c2VyID0gVXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0ICAgICRzY29wZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlO1xuXHQgIFx0fSlcbiBcdH1lbHNlIHtcbiAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJylcbiAgfVxuXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgVXNlclN2YywgVGltZXNoZWV0U3ZjLCB0b2FzdHIpIHtcblxuXHRpZighVXNlclN2Yy5pc0xvZ2dlZEluKCkpe1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKVxuXHR9XG5cblx0JHNjb3BlLmNyZWF0ZU5ld1RpbWVTaGVldCA9IGZ1bmN0aW9uKHRpdGxlLCB3ZWVrX2JlZ2lubmluZyl7XG5cdFx0Y29uc29sZS5sb2cobmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpKSk7XG5cdCAgVGltZXNoZWV0U3ZjLmNyZWF0ZSh7XG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgd2Vla19iZWdpbm5pbmc6IHdlZWtfYmVnaW5uaW5nLFxuICAgICAgICB3ZWVrX29uZTp7XG4gICAgICAgIFx0c3VuZGF5OntkYXRlOm5ldyBEYXRlKHdlZWtfYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCksIHdlZWtfYmVnaW5uaW5nLmdldE1vbnRoKCksIHdlZWtfYmVnaW5uaW5nLmdldERhdGUoKSkgfSxcblx0ICAgICAgICBtb25kYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgMSl9LFxuXHQgICAgICAgIHR1ZXNkYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgMil9LFxuXHQgICAgICAgIHdlZG5lc2RheTp7ZGF0ZTpuZXcgRGF0ZSh3ZWVrX2JlZ2lubmluZy5nZXRGdWxsWWVhcigpLCB3ZWVrX2JlZ2lubmluZy5nZXRNb250aCgpLCB3ZWVrX2JlZ2lubmluZy5nZXREYXRlKCkgKyAzKX0sXG5cdCAgICAgICAgdGh1cnNkYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgNCl9LFxuXHQgICAgICAgIGZyaWRheTp7ZGF0ZTpuZXcgRGF0ZSh3ZWVrX2JlZ2lubmluZy5nZXRGdWxsWWVhcigpLCB3ZWVrX2JlZ2lubmluZy5nZXRNb250aCgpLCB3ZWVrX2JlZ2lubmluZy5nZXREYXRlKCkgKyA1KX0sXG4gICAgICAgIFx0c2F0dXJkYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgNil9XG4gICAgICAgIH0sXG4gICAgICAgIHdlZWtfdHdvOntcbiAgICAgICAgXHRzdW5kYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgNyl9LFxuXHQgICAgICAgIG1vbmRheTp7ZGF0ZTpuZXcgRGF0ZSh3ZWVrX2JlZ2lubmluZy5nZXRGdWxsWWVhcigpLCB3ZWVrX2JlZ2lubmluZy5nZXRNb250aCgpLCB3ZWVrX2JlZ2lubmluZy5nZXREYXRlKCkgKyA4KX0sXG5cdCAgICAgICAgdHVlc2RheTp7ZGF0ZTpuZXcgRGF0ZSh3ZWVrX2JlZ2lubmluZy5nZXRGdWxsWWVhcigpLCB3ZWVrX2JlZ2lubmluZy5nZXRNb250aCgpLCB3ZWVrX2JlZ2lubmluZy5nZXREYXRlKCkgKyA5KX0sXG5cdCAgICAgICAgd2VkbmVzZGF5OntkYXRlOm5ldyBEYXRlKHdlZWtfYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCksIHdlZWtfYmVnaW5uaW5nLmdldE1vbnRoKCksIHdlZWtfYmVnaW5uaW5nLmdldERhdGUoKSArIDEwKX0sXG5cdCAgICAgICAgdGh1cnNkYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgMTEpfSxcblx0ICAgICAgICBmcmlkYXk6e2RhdGU6bmV3IERhdGUod2Vla19iZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSwgd2Vla19iZWdpbm5pbmcuZ2V0TW9udGgoKSwgd2Vla19iZWdpbm5pbmcuZ2V0RGF0ZSgpICsgMTIpfSxcbiAgICAgICAgXHRzYXR1cmRheTp7ZGF0ZTpuZXcgRGF0ZSh3ZWVrX2JlZ2lubmluZy5nZXRGdWxsWWVhcigpLCB3ZWVrX2JlZ2lubmluZy5nZXRNb250aCgpLCB3ZWVrX2JlZ2lubmluZy5nZXREYXRlKCkgKyAxMyl9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbiAodGltZV9zaGVldCkge1xuICAgICAgXHQkc2NvcGUudGltZXNoZWV0cy51bnNoaWZ0KHRpbWVfc2hlZXQpXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9KVxuXHR9XG5cblx0VGltZXNoZWV0U3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAodGltZXNoZWV0cykge1xuXHRcdCRzY29wZS50aW1lc2hlZXRzID0gdGltZXNoZWV0cztcblx0fSlcblx0XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2YywgdG9hc3RyKSB7XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uIChIX251bWJlciwgcGFzc3dvcmQpIHtcbiAgXHQkc2NvcGUuZXJyb3JNc2cgPSAnJztcbiAgICBVc2VyU3ZjLmxvZ2luKEhfbnVtYmVyLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgIFx0JHNjb3BlLmVycm9yTXNnID0gXCJJbmNvcnJlY3QgSCBOdW1iZXIvUGFzc3dvcmQuXCI7XG4gICAgfSlcbiAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMsIHRvYXN0cikge1xuXG5cdCRzY29wZS5lcnJvcj1mYWxzZTtcblx0JHNjb3BlLmVycm9ybXNnPVwiXCI7XG5cblx0JHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKEhfbnVtYmVyLCBwYXNzd29yZCwgbmFtZSwgZW1haWxhZGRyKSB7XG5cdFx0VXNlclN2Yy5yZWdpc3RlcihIX251bWJlciwgcGFzc3dvcmQsIG5hbWUsIGVtYWlsYWRkcilcblx0XHRcdC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdFx0XHQgICRzY29wZS4kZW1pdCgnbG9naW4nLCB1c2VyKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHQgIGlmIChlcnJvci5zdGF0dXMgPT0gNDAxKXtcblx0XHRcdCAgXHQkc2NvcGUuZXJyb3IgPSB0cnVlO1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ1RoaXMgSC1OdW1iZXIgaXMgYWxyZWFkeSBpbiB1c2UsIGZhZ2dvdC4nLCAnRXJyb3InKTtcblx0XHRcdCAgfVxuXHRcdFx0fSlcblx0fVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcblx0JHJvdXRlUHJvdmlkZXJcblx0LndoZW4oJy8nLCAgICAgICAgIHsgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvZGFzaGJvYXJkLmh0bWwnIH0pXG5cdC53aGVuKCcvcmVnaXN0ZXInLCB7IGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvcmVnaXN0ZXIuaHRtbCcgfSlcblx0LndoZW4oJy9sb2dpbicsICAgIHsgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9sb2dpbi5odG1sJyB9KVxuXHQud2hlbignL3RpbWVzaGVldC86dGltZXNoZWV0X2lkJyx7IGNvbnRyb2xsZXI6ICdUaW1lc2hlZXRDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3RpbWVzaGVldC5odG1sJyB9KVxuXHQud2hlbignL2FkbWluJyx7IGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvYWRtaW4uaHRtbCcgIH0pXG59KVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdUaW1lc2hlZXRDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgVXNlclN2YywgVGltZXNoZWV0U3ZjLCB0b2FzdHIpIHtcblxuXHRpZighVXNlclN2Yy5pc0xvZ2dlZEluKCkpe1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKVxuXHR9XG5cblx0JHNjb3BlLmNsb2NraW4gPSBmdW5jdGlvbigpe1xuXHRcdFxuXHR9XG5cblx0JHNjb3BlLmNsb2Nrb3V0ID0gZnVuY3Rpb24oKXtcblx0XHRcblx0fVxuXG5cdFRpbWVzaGVldFN2Yy5mZXRjaEJ5SWQoJHJvdXRlUGFyYW1zLnRpbWVzaGVldF9pZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0JHNjb3BlLnRpbWVzaGVldCA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0Y29uc29sZS5sb2coJHNjb3BlLnRpbWVzaGVldCk7XG4gICAgfSlcblxuICAgICRzY29wZS5kZWxldGVUaW1lc2hlZXQgPSBmdW5jdGlvbigpIHtcbiAgICBcdHZhciB0aW1lU2hlZXRJZCA9ICRyb3V0ZVBhcmFtcy50aW1lc2hlZXRfaWQ7XG4gICAgXHRUaW1lc2hlZXRTdmMuZGVsZXRlQnlJZCh0aW1lU2hlZXRJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgXHRcdHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG4gICAgXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgXHR9KTtcbiAgICB9XG5cdFxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1RpbWVzaGVldFN2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICBcbiAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RpbWVzaGVldHMnKVxuICB9XG5cbiAgdGhpcy5mZXRjaEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RpbWVzaGVldHMvJyArIGlkKVxuICB9XG5cbiAgdGhpcy5kZWxldGVCeUlkID0gZnVuY3Rpb24oaWQpe1xuICBcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvdGltZXNoZWV0cy8nICsgaWQpXG4gIH1cblxuICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHRpbWVzaGVldCl7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdGltZXNoZWV0cycsIHRpbWVzaGVldCk7XG4gIH1cbiAgXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdmFyIHN2YyA9IHRoaXNcbiAgc3ZjLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgIH0pXG4gIH1cbiAgc3ZjLmxvZ2luID0gZnVuY3Rpb24gKEhfbnVtYmVyLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xuICAgICAgSF9udW1iZXI6IEhfbnVtYmVyLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuID0gcmVzcG9uc2UuZGF0YVxuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYXV0aCddID0gcmVzcG9uc2UuZGF0YVxuICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKClcbiAgICB9KVxuICB9XG4gIHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uIChIX251bWJlciwgcGFzc3dvcmQsIG5hbWUsIGVtYWlsYWRkcikge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgSF9udW1iZXI6IEhfbnVtYmVyLCBwYXNzd29yZDogcGFzc3dvcmQsIG5hbWU6IG5hbWUsIGVtYWlsYWRkcjogZW1haWxhZGRyXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3ZjLmxvZ2luKEhfbnVtYmVyLCBwYXNzd29yZClcbiAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSlcbiAgfVxuICBzdmMuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uICgpe1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICBpZih3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4pe1xuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYXV0aCddID0gd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuXG4gICAgICByZXN1bHQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
