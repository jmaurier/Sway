angular.module("app",["ngRoute"]),angular.module("app",["ngRoute","toastr","ui.bootstrap"]).controller("ApplicationCtrl",["$scope","$location","$window","UserSvc","toastr","$modal",function(e,t,n,o,r,s){if(e.$on("login",function(n,o){e.currentUser=o,t.path("/")}),e.logout=function(){delete e.currentUser,t.path("/login"),window.sessionStorage.removeItem("token")},o.isLoggedIn()){o.getUser().then(function(t){e.currentUser=t})}else t.path("/login")}]),angular.module("app").controller("DashboardCtrl",["$scope","$location","UserSvc","TimesheetSvc","toastr",function(e,t,n,o,r){n.isLoggedIn()||t.path("/login"),e.has_current_timesheet=!1,e.createNewTimeSheet=function(n,r,s){var i=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1);i===r&&console.log(i),o.create({title:n,week_beginning:r,department:s}).success(function(n){e.timesheets.unshift(n),t.path("/")})},o.fetch().success(function(t){console.log(t),e.timesheets=t})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","toastr",function(e,t,n){e.login=function(n,o){e.errorMsg="",t.login(n,o).then(function(t){e.$emit("login",t)},function(t){e.errorMsg="Incorrect H Number/Password."})}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","toastr",function(e,t,n){e.error=!1,e.errormsg="",e.register=function(o,r,s,i){t.register(o,r,s,i).then(function(t){e.$emit("login",t)},function(t){console.log(t),401==t.status&&(e.error=!0,n.error("This H-Number is already in use, faggot.","Error"))})}}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"DashboardCtrl",templateUrl:"/templates/dashboard.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"}).when("/timesheet/:timesheet_id",{controller:"TimesheetCtrl",templateUrl:"/templates/timesheet.html"})}]),angular.module("app").controller("TimesheetCtrl",["$scope","$routeParams","$location","UserSvc","TimesheetSvc","toastr",function(e,t,n,o,r,s){o.isLoggedIn()||n.path("/login"),r.fetchById(t.timesheet_id).then(function(t){e.timesheet=t.data})}]),angular.module("app").service("TimesheetSvc",["$http",function(e){this.fetch=function(){return e.get("/api/timesheets")},this.fetchById=function(t){return e.get("/api/timesheets/"+t)},this.create=function(t){return e.post("/api/timesheets",t)}}]),angular.module("app").service("UserSvc",["$http",function(e){var t=this;t.getUser=function(){return e.get("/api/users").then(function(e){return e.data})},t.login=function(n,o){return e.post("/api/sessions",{H_number:n,password:o}).then(function(n){return window.sessionStorage.token=n.data,e.defaults.headers.common["x-auth"]=n.data,t.getUser()})},t.register=function(n,o,r,s){return e.post("/api/users",{H_number:n,password:o,name:r,emailaddr:s}).then(function(){return t.login(n,o)},function(e){console.log(e)})},t.isLoggedIn=function(){var t=!1;return window.sessionStorage.token&&(e.defaults.headers.common["x-auth"]=window.sessionStorage.token,t=!0),t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJkYXNoYm9hcmQuY3RybC5qcyIsImxvZ2luLmN0cmwuanMiLCJyZWdpc3Rlci5jdHJsLmpzIiwicm91dGVzLmpzIiwidGltZXNoZWV0LmN0cmwuanMiLCJ0aW1lc2hlZXQuc3ZjLmpzIiwidXNlci5zdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9jYXRpb24iLCIkd2luZG93IiwiVXNlclN2YyIsInRvYXN0ciIsIiRtb2RhbCIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJwYXRoIiwibG9nb3V0Iiwid2luZG93Iiwic2Vzc2lvblN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiaXNMb2dnZWRJbiIsImdldFVzZXIiLCJ0aGVuIiwicmVzcG9uc2UiLCJUaW1lc2hlZXRTdmMiLCJoYXNfY3VycmVudF90aW1lc2hlZXQiLCJjcmVhdGVOZXdUaW1lU2hlZXQiLCJ0aXRsZSIsIndlZWtfYmVnaW5uaW5nIiwiZGVwYXJ0bWVudCIsInRlbXBEYXRlIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZSIsInN1Y2Nlc3MiLCJ0aW1lX3NoZWV0IiwidGltZXNoZWV0cyIsInVuc2hpZnQiLCJmZXRjaCIsImxvZ2luIiwiSF9udW1iZXIiLCJwYXNzd29yZCIsImVycm9yTXNnIiwiJGVtaXQiLCJlcnJvciIsImVycm9ybXNnIiwicmVnaXN0ZXIiLCJuYW1lIiwiZW1haWxhZGRyIiwic3RhdHVzIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCIkcm91dGVQYXJhbXMiLCJmZXRjaEJ5SWQiLCJ0aW1lc2hlZXRfaWQiLCJ0aW1lc2hlZXQiLCJkYXRhIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsImlkIiwicG9zdCIsInN2YyIs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bnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgJ25nUm91dGUnXG5dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsJ3RvYXN0cicsJ3VpLmJvb3RzdHJhcCddKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHdpbmRvdywgVXNlclN2YywgdG9hc3RyLCAkbW9kYWwpIHtcbiAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xuICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXJcbiAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gIH0pXG5cbiAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gIFx0ZGVsZXRlKCRzY29wZS5jdXJyZW50VXNlcikgXG4gICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpXG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJylcbiAgfVxuXG4gIGlmKFVzZXJTdmMuaXNMb2dnZWRJbigpKXtcblx0ICBcdHZhciB1c2VyID0gVXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0ICAgICRzY29wZS5jdXJyZW50VXNlciA9IHJlc3BvbnNlO1xuXHQgIFx0fSlcbiBcdH1lbHNlIHtcbiAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJylcbiAgfVxuXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgVXNlclN2YywgVGltZXNoZWV0U3ZjLCB0b2FzdHIpIHtcblxuXHRpZighVXNlclN2Yy5pc0xvZ2dlZEluKCkpe1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKVxuXHR9XG5cblx0JHNjb3BlLmhhc19jdXJyZW50X3RpbWVzaGVldCA9IGZhbHNlO1xuXG5cdCRzY29wZS5jcmVhdGVOZXdUaW1lU2hlZXQgPSBmdW5jdGlvbih0aXRsZSwgd2Vla19iZWdpbm5pbmcsIGRlcGFydG1lbnQpe1xuXHRcdHZhciB0ZW1wRGF0ZSA9IG5ldyBEYXRlKHdlZWtfYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCksIHdlZWtfYmVnaW5uaW5nLmdldE1vbnRoKCksIHdlZWtfYmVnaW5uaW5nLmdldERhdGUoKSArIDEpXG5cdFx0aWYodGVtcERhdGUgPT09IHdlZWtfYmVnaW5uaW5nKVxuXHQgIFx0XHRjb25zb2xlLmxvZyh0ZW1wRGF0ZSk7XG5cblx0ICBUaW1lc2hlZXRTdmMuY3JlYXRlKHtcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICB3ZWVrX2JlZ2lubmluZzogd2Vla19iZWdpbm5pbmcsXG4gICAgICAgIGRlcGFydG1lbnQ6IGRlcGFydG1lbnRcbiAgICAgIH0pXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbiAodGltZV9zaGVldCkge1xuICAgICAgXHQkc2NvcGUudGltZXNoZWV0cy51bnNoaWZ0KHRpbWVfc2hlZXQpXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9KVxuXHR9XG5cblx0VGltZXNoZWV0U3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAodGltZXNoZWV0cykge1xuXHRcdGNvbnNvbGUubG9nKHRpbWVzaGVldHMpO1xuXHRcdCRzY29wZS50aW1lc2hlZXRzID0gdGltZXNoZWV0cztcblx0fSlcblx0XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMsIHRvYXN0cikge1xuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoSF9udW1iZXIsIHBhc3N3b3JkKSB7XG4gIFx0JHNjb3BlLmVycm9yTXNnID0gJyc7XG4gICAgVXNlclN2Yy5sb2dpbihIX251bWJlciwgcGFzc3dvcmQpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCB1c2VyKVxuICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICBcdCRzY29wZS5lcnJvck1zZyA9IFwiSW5jb3JyZWN0IEggTnVtYmVyL1Bhc3N3b3JkLlwiO1xuICAgIH0pXG4gIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjLCB0b2FzdHIpIHtcblxuXHQkc2NvcGUuZXJyb3I9ZmFsc2U7XG5cdCRzY29wZS5lcnJvcm1zZz1cIlwiO1xuXG5cdCRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChIX251bWJlciwgcGFzc3dvcmQsIG5hbWUsIGVtYWlsYWRkcikge1xuXHRcdFVzZXJTdmMucmVnaXN0ZXIoSF9udW1iZXIsIHBhc3N3b3JkLCBuYW1lLCBlbWFpbGFkZHIpXG5cdFx0XHQudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHRcdFx0ICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0ICBpZiAoZXJyb3Iuc3RhdHVzID09IDQwMSl7XG5cdFx0XHQgIFx0JHNjb3BlLmVycm9yID0gdHJ1ZTtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdUaGlzIEgtTnVtYmVyIGlzIGFscmVhZHkgaW4gdXNlLCBmYWdnb3QuJywgJ0Vycm9yJyk7XG5cdFx0XHQgIH1cblx0XHRcdH0pXG5cdH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyXG5cdC53aGVuKCcvJywgICAgICAgICB7IGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2Rhc2hib2FyZC5odG1sJyB9KVxuXHQud2hlbignL3JlZ2lzdGVyJywgeyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3JlZ2lzdGVyLmh0bWwnIH0pXG5cdC53aGVuKCcvbG9naW4nLCAgICB7IGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvbG9naW4uaHRtbCcgfSlcblx0LndoZW4oJy90aW1lc2hlZXQvOnRpbWVzaGVldF9pZCcseyBjb250cm9sbGVyOiAnVGltZXNoZWV0Q3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy90aW1lc2hlZXQuaHRtbCcgfSlcbn0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1RpbWVzaGVldEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBVc2VyU3ZjLCBUaW1lc2hlZXRTdmMsIHRvYXN0cikge1xuXG5cdGlmKCFVc2VyU3ZjLmlzTG9nZ2VkSW4oKSl7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpXG5cdH1cblxuXHRUaW1lc2hlZXRTdmMuZmV0Y2hCeUlkKCRyb3V0ZVBhcmFtcy50aW1lc2hlZXRfaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgJHNjb3BlLnRpbWVzaGVldCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgfSlcblx0XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVGltZXNoZWV0U3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gIFxuICB0aGlzLmZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdGltZXNoZWV0cycpXG4gIH1cblxuICB0aGlzLmZldGNoQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdGltZXNoZWV0cy8nICsgaWQpXG4gIH1cblxuICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHRpbWVzaGVldCl7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdGltZXNoZWV0cycsIHRpbWVzaGVldCk7XG4gIH1cbiAgXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdmFyIHN2YyA9IHRoaXNcbiAgc3ZjLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgIH0pXG4gIH1cbiAgc3ZjLmxvZ2luID0gZnVuY3Rpb24gKEhfbnVtYmVyLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xuICAgICAgSF9udW1iZXI6IEhfbnVtYmVyLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuID0gcmVzcG9uc2UuZGF0YVxuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYXV0aCddID0gcmVzcG9uc2UuZGF0YVxuICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKClcbiAgICB9KVxuICB9XG4gIHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uIChIX251bWJlciwgcGFzc3dvcmQsIG5hbWUsIGVtYWlsYWRkcikge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgSF9udW1iZXI6IEhfbnVtYmVyLCBwYXNzd29yZDogcGFzc3dvcmQsIG5hbWU6IG5hbWUsIGVtYWlsYWRkcjogZW1haWxhZGRyXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3ZjLmxvZ2luKEhfbnVtYmVyLCBwYXNzd29yZClcbiAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSlcbiAgfVxuICBzdmMuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uICgpe1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICBpZih3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4pe1xuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYXV0aCddID0gd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuXG4gICAgICByZXN1bHQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9